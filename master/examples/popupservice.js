(function(){'use strict';var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},p="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ba(){ba=function(){};p.Symbol||(p.Symbol=ca)}var ca=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function da(){ba();var a=p.Symbol.iterator;a||(a=p.Symbol.iterator=p.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ea(this)}});da=function(){}}function ea(a){var b=0;return fa(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function fa(a){da();a={next:a};a[p.Symbol.iterator]=function(){return this};return a}function ha(a){da();var b=a[Symbol.iterator];return b?b.call(a):ea(a)}
function ia(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function ja(a,b){if(b){var c=p;a=a.split(".");for(var e=0;e<a.length-1;e++){var d=a[e];d in c||(c[d]={});c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}ja("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){a=Number(a);return(b(a)+b(-a))/2}});
ja("Array.prototype.find",function(a){return a?a:function(a,c){a:{var b=this;b instanceof String&&(b=String(b));for(var d=b.length,f=0;f<d;f++){var g=b[f];if(a.call(c,g,f,b)){a=g;break a}}a=void 0}return a}});ja("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});ja("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var d=b.length;for(c=c||0;c<d;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}});
ja("String.prototype.includes",function(a){return a?a:function(a,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==(this+"").indexOf(a,c||0)}});var ka=this;
function la(a,b){a=a.split(".");var c=ka;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)a.length||void 0===b?c[e]&&c[e]!==Object.prototype[e]?c=c[e]:c=c[e]={}:c[e]=b}function ma(a,b){function c(){}c.prototype=b.prototype;a.sb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.lb=function(a,c,f){for(var e=Array(arguments.length-2),d=2;d<arguments.length;d++)e[d-2]=arguments[d];return b.prototype[c].apply(a,e)}};function r(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function t(){}var na=0;function oa(a){this.message="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}r(oa,Error);function u(a,b){if(!a)throw new oa(b);};var v="function"===typeof Object.assign?Object.assign:function(a,b){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),e=1,d=arguments.length;e<d;++e){var f=arguments[e];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function pa(a){for(var b in a)delete a[b]};function qa(a){function b(b){var c=a.listener,d=a.bindTo||a.target;a.ya&&ra(a);return c.call(d,b)}return a.xa=b}function sa(a,b,c,e){for(var d,f=0,g=a.length;f<g;++f)if(d=a[f],d.listener===b&&d.bindTo===c)return e&&(d.deleteIndex=f),d}function ta(a,b){return(a=a.W)?a[b]:void 0}function x(a,b,c,e,d){var f=a.W;f||(f=a.W={});var g=f;(f=g[b])||(f=g[b]=[]);(g=sa(f,c,e,!1))?d||(g.ya=!1):(g={bindTo:e,ya:!!d,listener:c,target:a,type:b},a.addEventListener(b,qa(g)),f.push(g));return g}
function ra(a){if(a&&a.target){a.target.removeEventListener(a.type,a.xa);var b=ta(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);if(0===b.length){b=a.target;c=a.type;var e=ta(b,c);if(e){for(var d=0,f=e.length;d<f;++d)b.removeEventListener(c,e[d].xa),pa(e[d]);e.length=0;if(e=b.W)delete e[c],0===Object.keys(e).length&&delete b.W}}}pa(a)}};function ua(){};function va(a){this.type=a;this.target=null}va.prototype.preventDefault=va.prototype.stopPropagation=function(){this.ab=!0};function A(){this.G={};this.w={};this.F={}}r(A,ua);A.prototype.addEventListener=function(a,b){var c=this.F[a];c||(c=this.F[a]=[]);-1===c.indexOf(b)&&c.push(b)};function wa(a,b){var c="string"===typeof b?new va(b):b;b=c.type;c.target=a;var e=a.F[b];if(e){b in a.w||(a.w[b]=0,a.G[b]=0);++a.w[b];for(var d=0,f=e.length;d<f&&!1!==e[d].call(a,c)&&!c.ab;++d);--a.w[b];if(0===a.w[b]){c=a.G[b];for(delete a.G[b];c--;)a.removeEventListener(b,t);delete a.w[b]}}}
A.prototype.removeEventListener=function(a,b){var c=this.F[a];c&&(b=c.indexOf(b),a in this.G?(c[b]=t,++this.G[a]):(c.splice(b,1),0===c.length&&delete this.F[a]))};function B(){A.call(this);this.ca=0}r(B,A);B.prototype.b=function(){++this.ca;wa(this,"change")};B.prototype.on=function(a,b,c){if(Array.isArray(a)){for(var e=a.length,d=Array(e),f=0;f<e;++f)d[f]=x(this,a[f],b,c);return d}return x(this,a,b,c)};B.prototype.once=function(a,b,c){if(Array.isArray(a)){for(var e=a.length,d=Array(e),f=0;f<e;++f)d[f]=x(this,a[f],b,c,!0);return d}return x(this,a,b,c,!0)};function C(a){B.call(this);this.Da||(this.Da=++na);this.O={};void 0!==a&&xa(this,a)}r(C,B);var ya={};function za(a){return ya.hasOwnProperty(a)?ya[a]:ya[a]="change:"+a}C.prototype.get=function(a){var b;this.O.hasOwnProperty(a)&&(b=this.O[a]);return b};C.prototype.set=function(a,b,c){c?this.O[a]=b:(c=this.O[a],this.O[a]=b,c!==b&&(b=za(a),wa(this,new Aa(b,a,c)),wa(this,new Aa("propertychange",a,c))))};function xa(a,b){for(var c in b)a.set(c,b[c],void 0)}
function Aa(a,b,c){va.call(this,a);this.key=b;this.oldValue=c}r(Aa,va);function Da(a,b,c,e,d){return d?(d[0]=a,d[1]=b,d[2]=c,d[3]=e,d):[a,b,c,e]}function Ea(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function Fa(a,b){var c=[Infinity,Infinity,-Infinity,-Infinity];a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c};var Ga=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
var Ha={};Ha.degrees=12741994*Math.PI/360;Ha.ft=.3048;Ha.m=1;Ha["us-ft"]=1200/3937;var Ia=null;function Ja(){return Ia||window.proj4};function Ka(a){this.C=a.code;this.a=a.units;this.f=void 0!==a.extent?a.extent:null;this.eb=void 0!==a.ma?a.ma:null;this.b=void 0!==a.ga?a.ga:"enu";this.c=a.Aa;var b=a.code,c=Ja();"function"==typeof c&&(b=c.defs(b),void 0!==b&&(void 0!==b.axis&&void 0===a.ga&&(this.b=b.axis),void 0===a.Aa&&(this.c=b.to_meter),void 0===a.units&&(this.a=b.units)))}Ka.prototype.D=function(){return this.f};function D(a){Ka.call(this,{code:a,units:"m",extent:La,global:!0,ma:Ma,ob:function(a,c){return a/Ga(c[1]/6378137)}})}r(D,Ka);var E=6378137*Math.PI,La=[-E,-E,E,E],Ma=[-180,-85,180,85],Na=[new D("EPSG:3857"),new D("EPSG:102100"),new D("EPSG:102113"),new D("EPSG:900913"),new D("urn:ogc:def:crs:EPSG:6.18:3:3857"),new D("urn:ogc:def:crs:EPSG::3857"),new D("http://www.opengis.net/gml/srs/epsg.xml#3857")];
function Oa(a,b,c){var e=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(e));for(var d=0;d<e;d+=c){b[d]=E*a[d]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[d+1]+90)/360));f>E?f=E:f<-E&&(f=-E);b[d+1]=f}return b}function Pa(a,b,c){var e=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(e));for(var d=0;d<e;d+=c)b[d]=180*a[d]/E,b[d+1]=360*Math.atan(Math.exp(a[d+1]/6378137))/Math.PI-90;return b};function G(a,b){Ka.call(this,{code:a,units:"degrees",extent:Qa,ga:b,global:!0,Aa:Ra,ma:Qa})}r(G,Ka);var Qa=[-180,-90,180,90],Ra=6378137*Math.PI/180,Sa=[new G("CRS:84"),new G("EPSG:4326","neu"),new G("urn:ogc:def:crs:EPSG::4326","neu"),new G("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new G("urn:ogc:def:crs:OGC:1.3:CRS84"),new G("urn:ogc:def:crs:OGC:2:84"),new G("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new G("urn:x-ogc:def:crs:EPSG:4326","neu")];var Ta={};var Ua={};function Va(a,b,c){a=a.C;b=b.C;a in Ua||(Ua[a]={});Ua[a][b]=c}function Wa(a,b){var c;a in Ua&&b in Ua[a]&&(c=Ua[a][b]);return c};function Xa(a){a.forEach(Ya);a.forEach(function(b){a.forEach(function(a){b!==a&&Va(b,a,Za)})})}function Ya(a){Ta[a.C]=a;Va(a,a,Za)}function $a(a){return function(b,c,e){var d=b.length;e=void 0!==e?e:2;c=void 0!==c?c:Array(d);var f;for(f=0;f<d;f+=e){var g=a([b[f],b[f+1]]);c[f]=g[0];c[f+1]=g[1];for(g=e-1;2<=g;--g)c[f+g]=b[f+g]}return c}}
function H(a){var b=null;if(a instanceof Ka)b=a;else if("string"===typeof a&&(b=Ta[a]||null,!b)){var c=Ja();"function"==typeof c&&void 0!==c.defs(a)&&(b=new Ka({code:a}),Ya(b))}return b}function ab(a,b){if(a===b)return!0;var c=a.a===b.a;return a.C===b.C?c:bb(a,b)===Za&&c}function cb(a,b){a=H(a);b=H(b);return bb(a,b)}
function bb(a,b){var c=a.C,e=b.C,d=Wa(c,e);if(!d){var f=Ja();if("function"==typeof f){var g=f.defs(c),h=f.defs(e);void 0!==g&&void 0!==h&&(g===h?Xa([b,a]):(f=f(e,c),d=f.forward,f=f.inverse,b=H(b),a=H(a),Va(b,a,$a(d)),Va(a,b,$a(f))),d=Wa(c,e))}}d||(d=db);return d}function db(a,b){if(void 0!==b&&a!==b){for(var c=0,e=a.length;c<e;++c)b[c]=a[c];a=b}return a}function Za(a,b){if(void 0!==b){for(var c=0,e=a.length;c<e;++c)b[c]=a[c];a=b}else a=a.slice();return a}
function eb(a,b,c){b=cb(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var e=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,e);c=Math.max.apply(null,c);e=Math.max.apply(null,e);return Da(a,b,c,e,void 0)}Xa(Na);Xa(Sa);Sa.forEach(function(a){Na.forEach(function(b){Va(a,b,Oa);Va(b,a,Pa)})});function J(){C.call(this);this.aa=[Infinity,Infinity,-Infinity,-Infinity];this.na=-1;this.Ca=[1,0,0,1,0,0]}r(J,C);J.prototype.D=function(a){this.na!=this.ca&&(this.aa=this.T(this.aa),this.na=this.ca);var b=this.aa;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};
J.prototype.transform=function(a,b){var c=this.Ca;a=H(a);var e="tile-pixels"==a.a?function(e,f,g){var d=a.D(),m=a.eb;d=(m[3]-m[1])/(d[3]-d[1]);var k=m[0];m=m[3];var q=-d,n=Math.sin(0),y=Math.cos(0);c[0]=d*y;c[1]=q*n;c[2]=-d*n;c[3]=q*y;c[4]=0*d*y-0*d*n+k;c[5]=0*q*n+0*q*y+m;d=e.length;k=f?f:[];for(q=m=0;q<d;q+=g)n=e[q],y=e[q+1],k[m++]=c[0]*n+c[2]*y+c[4],k[m++]=c[1]*n+c[3]*y+c[5];f&&k.length!=m&&(k.length=m);return cb(a,b)(e,f,g)}:cb(a,b);this.S(e);return this};function fb(){return document.createElement("CANVAS").getContext("2d")};(function(){if(!("HTMLCanvasElement"in window))return!1;try{return document.createElement("CANVAS").getContext("2d")?!0:!1}catch(a){return!1}})();function gb(a){A.call(this);this.highWaterMark=void 0!==a?a:2048;this.c={};this.a=this.b=null}r(gb,A);l=gb.prototype;l.clear=function(){this.c={};this.a=this.b=null;wa(this,"clear")};l.forEach=function(a,b){for(var c=this.b;c;)a.call(b,c.K,c.za,this),c=c.o};l.get=function(a){a=this.c[a];u(void 0!==a,15);if(a===this.a)return a.K;a===this.b?(this.b=this.b.o,this.b.A=null):(a.o.A=a.A,a.A.o=a.o);a.o=null;a.A=this.a;this.a=this.a.o=a;return a.K};
l.remove=function(a){var b=this.c[a];u(void 0!==b,15);if(b===this.a){if(this.a=b.A)this.a.o=null}else if(b===this.b){if(this.b=b.o)this.b.A=null}else b.o.A=b.A,b.A.o=b.o;delete this.c[a];return b.K};l.pop=function(){var a=this.b;delete this.c[a.za];a.o&&(a.o.A=null);this.b=a.o;this.b||(this.a=null);return a.K};l.replace=function(a,b){this.get(a);this.c[a].K=b};l.set=function(a,b){u(!(a in this.c),16);b={za:a,o:null,A:this.a,K:b};this.a?this.a.o=b:this.b=b;this.a=b;this.c[a]=b};var hb=new gb;function ib(a){C.call(this);this.a="geometry";this.c=null;x(this,za(this.a),this.f,this);void 0!==a&&(a instanceof J||!a?this.set(this.a,a):xa(this,a))}r(ib,C);ib.prototype.T=function(){return this.get(this.a)};ib.prototype.S=function(){this.b()};ib.prototype.f=function(){this.c&&(ra(this.c),this.c=null);var a=this.T();a&&(this.c=x(a,"change",this.S,this));this.b()};ib.prototype.setStyle=function(a){a&&"function"!==typeof a&&(Array.isArray(a)||u(!1,41));this.b()};function jb(){this.a=this.N=null};function kb(a,b){return a>b?1:a<b?-1:0}function lb(a,b){for(var c=a.length>>>0,e,d=0;d<c;d++)if(e=a[d],b(e,d,a))return e;return null}function mb(a,b){var c;return a.every(function(e,d){c=d;return!b(e,d,a)})?-1:c}function nb(a,b){var c=b||kb;return a.every(function(b,d){if(0===d)return!0;b=c(a[d-1],b);return!(0<b||0===b)})};function K(){J.call(this);this.ba="XY";this.f=2;this.a=null}r(K,J);function ob(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}K.prototype.T=function(a){var b=this.a,c=this.a.length,e=this.f;a=Da(Infinity,Infinity,-Infinity,-Infinity,a);for(var d=0;d<c;d+=e){var f=a,g=b[d],h=b[d+1];f[0]=Math.min(f[0],g);f[1]=Math.min(f[1],h);f[2]=Math.max(f[2],g);f[3]=Math.max(f[3],h)}return a};function pb(a){a.f=ob("XY");a.ba="XY";a.a=null}
function qb(a,b,c,e){if(b)c=ob(b);else{for(b=0;b<e;++b){if(0===c.length){a.ba="XY";a.f=2;return}c=c[0]}c=c.length;var d;2==c?d="XY":3==c?d="XYZ":4==c&&(d="XYZM");b=d}a.ba=b;a.f=c}K.prototype.S=function(a){this.a&&(a(this.a,this.a,this.f),this.b())};
K.prototype.scale=function(a,b,c){var e=b;void 0===e&&(e=a);var d=c;d||(d=Ea(this.D()));if(c=this.a){b=c.length;var f=this.f,g=c?c:[],h=d[0];d=d[1];for(var m=0,k=0;k<b;k+=f){var q=c[k]-h,n=c[k+1]-d;g[m++]=h+a*q;g[m++]=d+e*n;for(q=k+2;q<k+f;++q)g[m++]=c[q]}c&&g.length!=m&&(g.length=m);this.b()}};function rb(a,b,c,e){var d;var f=0;for(d=c.length;f<d;++f){var g=c[f],h;for(h=0;h<e;++h)a[b++]=g[h]}return b}function sb(a,b,c,e,d){d=d?d:[];var f=0,g;var h=0;for(g=c.length;h<g;++h)b=rb(a,b,c[h],e),d[f++]=b;d.length=f;return d};function tb(a,b){K.call(this);this.c(a,b)}r(tb,K);tb.prototype.getType=function(){return"LineString"};tb.prototype.c=function(a,b){a?(qb(this,b,a,1),this.a||(this.a=[]),this.a.length=rb(this.a,0,a,this.f)):pb(this);this.b()};var L={ka:{}};L.ka.pa=function(){};
(function(a){function b(a,b,c){if(g)return new ImageData(a,b,c);b=h.createImageData(b,c);b.data.set(a);return b}function c(a){var b=!0;try{new ImageData(10,10)}catch(q){b=!1}return function(c){var d=c.buffers,e=c.meta,f=c.width,g=c.height,k=d.length,m=d[0].byteLength;if(c.imageOps){m=Array(k);for(c=0;c<k;++c){var w=c;var z=new Uint8ClampedArray(d[c]);var h=f,q=g;z=b?new ImageData(z,h,q):{data:z,width:h,height:q};m[w]=z}f=a(m,e).data}else{f=new Uint8ClampedArray(m);g=Array(k);w=Array(k);for(c=0;c<
k;++c)g[c]=new Uint8ClampedArray(d[c]),w[c]=[0,0,0,0];for(d=0;d<m;d+=4){for(c=0;c<k;++c)z=g[c],w[c][0]=z[d],w[c][1]=z[d+1],w[c][2]=z[d+2],w[c][3]=z[d+3];c=a(w,e);f[d]=c[0];f[d+1]=c[1];f[d+2]=c[2];f[d+3]=c[3]}}return f.buffer}}function e(a,b){var d=Object.keys(a.Va||{}).map(function(b){return"var "+b+" = "+a.Va[b].toString()+";"}).concat(["var __minion__ = ("+c.toString()+")(",a.Za.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);",
"});"]);d=URL.createObjectURL(new Blob(d,{type:"text/javascript"}));d=new Worker(d);d.addEventListener("message",b);return d}function d(a,b){var d=c(a.Za);return{postMessage:function(a){setTimeout(function(){b({data:{buffer:d(a),meta:a.meta}})},0)}}}function f(a){this.da=!!a.pb;var b;0===a.cb?b=0:this.da?b=1:b=a.cb||1;var c=[];if(b)for(var f=0;f<b;++f)c[f]=e(a,this.ua.bind(this,f));else c[0]=d(a,this.ua.bind(this,0));this.V=c;this.va=[];this.U=0;this.H={};this.ea=null}var g=!0;try{new ImageData(10,
10)}catch(m){g=!1}var h=document.createElement("canvas").getContext("2d");f.prototype.destroy=function(){for(var a in this)this[a]=null;this.Ka=!0};f.prototype.La=function(){if(0===this.U&&0<this.va.length){var a=this.ea=this.va.shift(),b=a.inputs[0].width,c=a.inputs[0].height,d=a.inputs.map(function(a){return a.data.buffer}),e=this.V.length;this.U=e;if(1===e)this.V[0].postMessage({buffers:d,meta:a.Wa,imageOps:this.da,width:b,height:c},d);else for(var f=4*Math.ceil(a.inputs[0].data.length/4/e),g=
0;g<e;++g){for(var h=g*f,Ca=[],w=0,z=d.length;w<z;++w)Ca.push(d[g].slice(h,h+f));this.V[g].postMessage({buffers:Ca,meta:a.Wa,imageOps:this.da,width:b,height:c},Ca)}}};f.prototype.ua=function(a,b){this.Ka||(this.H[a]=b.data,--this.U,0===this.U&&this.Na())};f.prototype.Na=function(){var a=this.ea,c=this.V.length;if(1===c){var d=new Uint8ClampedArray(this.H[0].buffer);var e=this.H[0].meta}else{var f=a.inputs[0].data.length;d=new Uint8ClampedArray(f);e=Array(f);f=4*Math.ceil(f/4/c);for(var g=0;g<c;++g){var h=
g*f;d.set(new Uint8ClampedArray(this.H[g].buffer),h);e[g]=this.H[g].meta}}this.ea=null;this.H={};a.mb(null,b(d,a.inputs[0].width,a.inputs[0].height),e);this.La()};a["default"]={pa:f};a.pa=f})(L.ka=L.ka||{});function ub(a){B.call(this);this.a=a}r(ub,B);function vb(a){ub.call(this,a)}r(vb,ub);function wb(a){ub.call(this,a)}r(wb,vb);function xb(a){ub.call(this,a)}r(xb,wb);xb.handles=function(a,b){return"canvas"===a&&"IMAGE"===b.getType()};xb.create=function(a,b){return new xb(b)};function yb(a,b,c,e){this.g=a;this.j=b;this.i=c;this.l=e}yb.prototype.equals=function(a){return this.g==a.g&&this.i==a.i&&this.j==a.j&&this.l==a.l};yb.prototype.extend=function(a){a.g<this.g&&(this.g=a.g);a.j>this.j&&(this.j=a.j);a.i<this.i&&(this.i=a.i);a.l>this.l&&(this.l=a.l)};function zb(a){ub.call(this,a);this.context=null===this.context?null:fb()}r(zb,wb);zb.handles=function(a,b){return"canvas"===a&&"TILE"===b.getType()};zb.create=function(a,b){return new zb(b)};function Ab(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.a=a.la;u(nb(this.a,function(a,b){return b-a}),17);if(!a.origins)for(var b=0,c=this.a.length-1;b<c;++b)if(!e)var e=this.a[b]/this.a[b+1];else if(this.a[b]/this.a[b+1]!==e){e=void 0;break}this.maxZoom=this.a.length-1;this.b=void 0!==a.origin?a.origin:null;this.c=null;void 0!==a.origins&&(this.c=a.origins,u(this.c.length==this.a.length,20));e=a.extent;void 0===e||this.b||this.c||(this.b=[e[0],e[3]]);u(!this.b&&this.c||this.b&&!this.c,18);
this.f=null;void 0!==a.Z&&(this.f=a.Z,u(this.f.length==this.a.length,19));this.w=void 0!==a.tileSize?a.tileSize:this.f?null:256;u(!this.w&&this.f||this.w&&!this.f,22);this.F=void 0!==e?e:null;this.G=[0,0];void 0!==a.sizes?a.sizes.map(function(a){return new yb(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):e&&Bb(this,e)}var M=[0,0,0];Ab.prototype.D=function(){return this.F};
function Cb(a,b,c,e,d){var f=a.b?a.b:a.c[e],g=a.a[e];var h=a.w?a.w:a.f[e];a=a.G;Array.isArray(h)||(void 0===a?a=[h,h]:a[0]=a[1]=h,h=a);b=Math.floor((b-f[0])/g+(d?.5:0))/h[0];c=Math.floor((c-f[1])/g+(d?0:.5))/h[1];d?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));void 0!==M&&(M[0]=e,M[1]=b,M[2]=c)}
function Bb(a,b){for(var c=a.a.length,e=Array(c),d=a.minZoom;d<c;++d){var f=d;var g=a;var h=b,m=d;Cb(g,h[0],h[1],m,!1);var k=M[1],q=M[2];Cb(g,h[2],h[3],m,!0);g=new yb(k,M[1],q,M[2]);e[f]=g}};function Db(a){Ab.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,la:a.la,tileSize:a.tileSize,Z:a.Z,sizes:a.sizes})}r(Db,Ab);
function Eb(a,b,c){var e=[],d=[],f=[],g=[],h=[],m=void 0!==c?c:[];c=H(a.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var k=c.c||Ha[c.a],q="ne"==c.b.substr(0,2);a.TileMatrix.sort(function(a,b){return b.ScaleDenominator-a.ScaleDenominator});a.TileMatrix.forEach(function(a){var b;0<m.length?b=lb(m,function(b){return a.Identifier==b.TileMatrix}):b=!0;if(b){d.push(a.Identifier);b=2.8E-4*a.ScaleDenominator/k;var c=a.TileWidth,n=a.TileHeight;q?f.push([a.TopLeftCorner[1],a.TopLeftCorner[0]]):
f.push(a.TopLeftCorner);e.push(b);g.push(c==n?c:[c,n]);h.push([a.MatrixWidth,-a.MatrixHeight])}});return new Db({extent:b,origins:f,la:e,qb:d,Z:g,sizes:h})};function Fb(a,b){var c=lb(a.Contents.Layer,function(a){return a.Identifier==b.layer});if(null===c)return null;var e=a.Contents.TileMatrixSet;var d=1<c.TileMatrixSetLink.length?"projection"in b?mb(c.TileMatrixSetLink,function(a){var c=lb(e,function(b){return b.Identifier==a.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"),d=H(c),f=H(b.projection);return d&&f?ab(d,f):c==b.projection}):mb(c.TileMatrixSetLink,function(a){return a.TileMatrixSet==b.matrixSet}):0;0>d&&(d=
0);var f=c.TileMatrixSetLink[d].TileMatrixSet;var g=c.TileMatrixSetLink[d].TileMatrixSetLimits;var h=c.Format[0];"format"in b&&(h=b.format);d=mb(c.Style,function(a){return"style"in b?a.Title==b.style:a.isDefault});0>d&&(d=0);d=c.Style[d].Identifier;var m={};"Dimension"in c&&c.Dimension.forEach(function(a){var b=a.Identifier,c=a.Default;void 0===c&&(c=a.Value[0]);m[b]=c});var k=lb(a.Contents.TileMatrixSet,function(a){return a.Identifier==f});var q="projection"in b?H(b.projection):H(k.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,
"$1:$3"));var n=c.WGS84BoundingBox;if(void 0!==n){var y=H("EPSG:4326").D();y=n[0]==y[0]&&n[2]==y[2];var F=eb(n,"EPSG:4326",q);(n=q.D())&&(n[0]<=F[0]&&F[2]<=n[2]&&n[1]<=F[1]&&F[3]<=n[3]||(F=void 0))}g=Eb(k,F,g);var I=[];k=b.requestEncoding;k=void 0!==k?k:"";if("OperationsMetadata"in a&&"GetTile"in a.OperationsMetadata)for(a=a.OperationsMetadata.GetTile.DCP.HTTP.Get,F=0,n=a.length;F<n;++F){var Ba=lb(a[F].Constraint,function(a){return"GetEncoding"==a.name}).AllowedValues.Value;""===k&&(k=Ba[0]);if("KVP"===
k)0<=Ba.indexOf("KVP")&&I.push(a[F].href);else break}0===I.length&&(k="REST",c.ResourceURL.forEach(function(a){"tile"===a.resourceType&&(h=a.format,I.push(a.template))}));return{urls:I,layer:b.layer,matrixSet:f,format:h,projection:q,requestEncoding:k,tb:g,style:d,dimensions:m,wrapX:y,crossOrigin:b.crossOrigin}};try{new MouseEvent("click",{buttons:1})}catch(a){};function Gb(a,b){K.call(this);this.c(a,b)}r(Gb,K);Gb.prototype.T=function(a){var b=this.a,c=b[0];b=b[1];return Da(c,b,c,b,a)};Gb.prototype.getType=function(){return"Point"};Gb.prototype.c=function(a,b){if(a){qb(this,b,a,0);this.a||(this.a=[]);var c=b=this.a,e=0,d;var f=0;for(d=a.length;f<d;++f)c[e++]=a[f];b.length=e}else pb(this);this.b()};function Hb(a,b){K.call(this);this.B=[];this.c(a,b)}r(Hb,K);Hb.prototype.getType=function(){return"Polygon"};Hb.prototype.c=function(a,b){a?(qb(this,b,a,2),this.a||(this.a=[]),a=sb(this.a,0,a,this.f,this.B),this.a.length=0===a.length?0:a[a.length-1]):(a=this.B,pb(this),this.B=a);this.b()};var Ib=[],Jb=[];function Kb(a,b){switch(a){case "MAP_RENDERER":a=Ib;a.push(b);break;case "LAYER_RENDERER":a=Jb;a.push(b);break;default:throw Error("Unsupported plugin type: "+a);}};function Lb(){}r(Lb,ua);function Mb(a){this.b=fb();this.a=this.b.canvas;this.a.style.width="100%";this.a.style.height="100%";this.a.style.display="block";this.a.className="ol-unselectable";a.insertBefore(this.a,a.childNodes[0]||null)}r(Mb,Lb);Mb.handles=function(a){return"canvas"===a};Mb.create=function(a){return new Mb(a)};Mb.prototype.getType=function(){return"canvas"};L.J=function(){};
(function(a){function b(a,d,f,g,h){f=f||0;g=g||a.length-1;for(h=h||e;g>f;){if(600<g-f){var w=g-f+1,k=d-f+1,z=Math.log(w),m=.5*Math.exp(2*z/3);z=.5*Math.sqrt(z*m*(w-m)/w)*(0>k-w/2?-1:1);b(a,d,Math.max(f,Math.floor(d-k*m/w+z)),Math.min(g,Math.floor(d+(w-k)*m/w+z)),h)}w=a[d];k=f;m=g;c(a,f,d);for(0<h(a[g],w)&&c(a,f,g);k<m;){c(a,k,m);k++;for(m--;0>h(a[k],w);)k++;for(;0<h(a[m],w);)m--}0===h(a[f],w)?c(a,f,m):(m++,c(a,m,g));m<=d&&(f=m+1);d<=m&&(g=m-1)}}function c(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function e(a,
b){return a<b?-1:a>b?1:0}function d(a,b){if(!(this instanceof d))return new d(a,b);this.fa=Math.max(4,a||9);this.ta=Math.max(2,Math.ceil(.4*this.fa));b&&this.Ma(b);this.clear()}function f(a,b){g(a,0,a.children.length,b,a)}function g(a,b,c,d,f){f||(f=I(null));f.g=Infinity;f.i=Infinity;f.j=-Infinity;f.l=-Infinity;for(var e;b<c;b++)e=a.children[b],h(f,a.u?d(e):e);return f}function h(a,b){a.g=Math.min(a.g,b.g);a.i=Math.min(a.i,b.i);a.j=Math.max(a.j,b.j);a.l=Math.max(a.l,b.l)}function m(a,b){return a.g-
b.g}function k(a,b){return a.i-b.i}function q(a){return(a.j-a.g)*(a.l-a.i)}function n(a){return a.j-a.g+(a.l-a.i)}function y(a,b){return a.g<=b.g&&a.i<=b.i&&b.j<=a.j&&b.l<=a.l}function F(a,b){return b.g<=a.j&&b.i<=a.l&&b.j>=a.g&&b.l>=a.i}function I(a){return{children:a,height:1,u:!0,g:Infinity,i:Infinity,j:-Infinity,l:-Infinity}}function Ba(a,b,c,d,f){for(var e=[b,c],g;e.length;)c=e.pop(),b=e.pop(),c-b<=d||(g=b+Math.ceil((c-b)/d/2)*d,Ca(a,g,b,c,f),e.push(b,g,g,c))}var Ca=b;"use strict";d.prototype=
{search:function(a){var b=this.data,c=[],d=this.v;if(!F(a,b))return c;for(var f=[],e,g,h,k;b;){e=0;for(g=b.children.length;e<g;e++)h=b.children[e],k=b.u?d(h):h,F(a,k)&&(b.u?c.push(h):y(a,k)?this.Fa(h,c):f.push(h));b=f.pop()}return c},load:function(a){if(!a||!a.length)return this;if(a.length<this.ta){for(var b=0,c=a.length;b<c;b++)this.insert(a[b]);return this}a=this.ra(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.wa(this.data,a):(this.data.height<a.height&&
(b=this.data,this.data=a,a=b),this.sa(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this.sa(a,this.data.height-1);return this},clear:function(){this.data=I([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,d=this.v(a),f=[],e=[],g,h,k,m;c||f.length;){c||(c=f.pop(),h=f[f.length-1],g=e.pop(),m=!0);if(c.u){a:{k=a;var w=c.children,z=b;if(z){for(var n=0;n<w.length;n++)if(z(k,w[n])){k=n;break a}k=-1}else k=w.indexOf(k)}if(-1!==k){c.children.splice(k,
1);f.push(c);this.Ja(f);break}}m||c.u||!y(c,d)?h?(g++,c=h.children[g],m=!1):c=null:(f.push(c),e.push(g),g=0,h=c,c=c.children[0])}return this},v:function(a){return a},ha:m,ia:k,toJSON:function(){return this.data},Fa:function(a,b){for(var c=[];a;)a.u?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},ra:function(a,b,c,d){var e=c-b+1,g=this.fa;if(e<=g){var h=I(a.slice(b,c+1));f(h,this.v);return h}d||(d=Math.ceil(Math.log(e)/Math.log(g)),g=Math.ceil(e/Math.pow(g,d-1)));h=I([]);
h.u=!1;h.height=d;e=Math.ceil(e/g);g=e*Math.ceil(Math.sqrt(g));var k;for(Ba(a,b,c,g,this.ha);b<=c;b+=g){var m=Math.min(b+g-1,c);Ba(a,b,m,e,this.ia);for(k=b;k<=m;k+=e){var n=Math.min(k+e-1,m);h.children.push(this.ra(a,k,n,d-1))}}f(h,this.v);return h},Ia:function(a,b,c,d){for(var e,f,g,h,k,m,n,w;;){d.push(b);if(b.u||d.length-1===c)break;n=w=Infinity;e=0;for(f=b.children.length;e<f;e++)g=b.children[e],k=q(g),m=(Math.max(g.j,a.j)-Math.min(g.g,a.g))*(Math.max(g.l,a.l)-Math.min(g.i,a.i))-k,m<w?(w=m,n=k<
n?k:n,h=g):m===w&&k<n&&(n=k,h=g);b=h||b.children[0]}return b},sa:function(a,b,c){var d=this.v;c=c?a:d(a);d=[];var e=this.Ia(c,this.data,b,d);e.children.push(a);for(h(e,c);0<=b;)if(d[b].children.length>this.fa)this.Oa(d,b),b--;else break;this.Ea(c,d,b)},Oa:function(a,b){var c=a[b],d=c.children.length,e=this.ta;this.Ga(c,e,d);d=this.Ha(c,e,d);d=I(c.children.splice(d,c.children.length-d));d.height=c.height;d.u=c.u;f(c,this.v);f(d,this.v);b?a[b-1].children.push(d):this.wa(c,d)},wa:function(a,b){this.data=
I([a,b]);this.data.height=a.height+1;this.data.u=!1;f(this.data,this.v)},Ha:function(a,b,c){var d,e;var f=e=Infinity;for(d=b;d<=c-b;d++){var h=g(a,0,d,this.v);var k=g(a,d,c,this.v);var m=Math.max(0,Math.min(h.j,k.j)-Math.max(h.g,k.g))*Math.max(0,Math.min(h.l,k.l)-Math.max(h.i,k.i));h=q(h)+q(k);if(m<f){f=m;var n=d;e=h<e?h:e}else m===f&&h<e&&(e=h,n=d)}return n},Ga:function(a,b,c){var d=a.u?this.ha:m,e=a.u?this.ia:k,f=this.qa(a,b,c,d);b=this.qa(a,b,c,e);f<b&&a.children.sort(d)},qa:function(a,b,c,d){a.children.sort(d);
d=this.v;var e=g(a,0,b,d),f=g(a,c-b,c,d),k=n(e)+n(f),m;for(m=b;m<c-b;m++){var q=a.children[m];h(e,a.u?d(q):q);k+=n(e)}for(m=c-b-1;m>=b;m--)q=a.children[m],h(f,a.u?d(q):q),k+=n(f);return k},Ea:function(a,b,c){for(;0<=c;c--)h(b[c],a)},Ja:function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():f(a[b],this.v)},Ma:function(a){var b=["return a"," - b",";"];this.ha=new Function("a","b",b.join(a[0]));this.ia=new Function("a","b",
b.join(a[1]));this.v=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};a["default"]=d})(L.J=L.J||{});L.J=L.J.default;function Nb(a){ub.call(this,a);a.a()&&L.J(9);fb();x(hb,"clear",this.c,this)}r(Nb,vb);Nb.handles=function(a,b){return"canvas"===a&&"VECTOR"===b.getType()};Nb.create=function(a,b){return new Nb(b)};Nb.prototype.c=function(){this.a.c()};function Ob(a){this.context=null;zb.call(this,a);a.a()&&L.J(9);a.f();x(hb,"clear",this.c,this)}r(Ob,zb);Ob.handles=function(a,b){return"canvas"===a&&"VECTOR_TILE"===b.getType()};Ob.create=function(a,b){return new Ob(b)};Ob.prototype.c=function(){var a=this.a;a.c()&&void 0!==this.f&&a.b()};Kb("MAP_RENDERER",Mb);for(var Pb=[xb,zb,Nb,Ob],Qb=0,Rb=Pb.length;Qb<Rb;++Qb)Kb("LAYER_RENDERER",Pb[Qb]);function Sb(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)Sb(a,b,c);return c}function Tb(a){return function(b,c){b=a.call(this,b,c);void 0!==b&&c[c.length-1].push(b)}}function N(a){return function(b,c){var e=a.call(this,b,c);if(void 0!==e){c=c[c.length-1];b=b.localName;var d;b in c?d=c[b]:d=c[b]=[];d.push(e)}}}
function O(a){return function(b,c){var e=a.call(this,b,c);void 0!==e&&(c[c.length-1][b.localName]=e)}}function P(a,b,c){c=void 0!==c?c:{};var e;var d=0;for(e=a.length;d<e;++d)c[a[d]]=b;return c}function Q(a,b,c,e){e.push(a);for(a=c.firstElementChild;a;a=a.nextElementSibling)c=b[a.namespaceURI],void 0!==c&&(c=c[a.localName],void 0!==c&&c.call(void 0,a,e));return e.pop()};function Ub(){return{restrict:"A",link:function(a,b,c){var e=a.$eval(c.ngeoSearch),d=a.$eval(c.ngeoSearchDatasets).slice();d.unshift(e);b.typeahead.apply(b,[].concat(d instanceof Array?d:ia(ha(d))));c=a.$eval(c.ngeoSearchListeners);var f=Ub.a(c);b.on("typeahead:open",function(){a.$apply(function(){f.open()})});b.on("typeahead:close",function(){a.$apply(function(){f.close()})});b.on("typeahead:cursorchange",function(b,c,d){a.$apply(function(){f.cursorchange(b,c,d)})});b.on("typeahead:select",function(b,
c,d){a.$apply(function(){f.select(b,c,d)})});b.on("typeahead:autocomplete",function(b,c,d){a.$apply(function(){f.autocomplete(b,c,d)})});b.on("typeahead:asyncreceive",function(c,d,e){a.$apply(function(){var a=b.data("tt-typeahead").menu._allDatasetsEmpty();f.datasetsempty(c,e,a)})})}}}
Ub.a=function(a){var b;void 0===a?b={open:t,close:t,cursorchange:t,datasetsempty:t,select:t,autocomplete:t}:b={open:void 0!==a.open?a.open:t,close:void 0!==a.close?a.close:t,cursorchange:void 0!==a.cursorchange?a.cursorchange:t,datasetsempty:void 0!==a.datasetsempty?a.datasetsempty:t,select:void 0!==a.select?a.select:t,autocomplete:void 0!==a.autocomplete?a.autocomplete:t};return b};Ub.module=angular.module("ngeoSearchDirective",[]);Ub.module.directive("ngeoSearch",Ub);function Vb(){jb.call(this)}r(Vb,jb);function Wb(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null}Vb.prototype.getType=function(){return"json"};function Xb(a){J.call(this);this.a=a?a:null;var b;if(this.a)for(a=0,b=this.a.length;a<b;++a)x(this.a[a],"change",this.b,this)}r(Xb,J);Xb.prototype.T=function(a){Da(Infinity,Infinity,-Infinity,-Infinity,a);for(var b=this.a,c=0,e=b.length;c<e;++c){var d=a,f=b[c].D();f[0]<d[0]&&(d[0]=f[0]);f[2]>d[2]&&(d[2]=f[2]);f[1]<d[1]&&(d[1]=f[1]);f[3]>d[3]&&(d[3]=f[3])}return a};Xb.prototype.getType=function(){return"GeometryCollection"};
Xb.prototype.scale=function(a,b,c){c||(c=Ea(this.D()));for(var e=this.a,d=0,f=e.length;d<f;++d)e[d].scale(a,b,c);this.b()};Xb.prototype.S=function(a){var b=this.a,c;var e=0;for(c=b.length;e<c;++e)b[e].S(a);this.b()};function Yb(a,b){K.call(this);this.B=[];this.c(a,b)}r(Yb,K);Yb.prototype.getType=function(){return"MultiLineString"};Yb.prototype.c=function(a,b){a?(qb(this,b,a,2),this.a||(this.a=[]),a=sb(this.a,0,a,this.f,this.B),this.a.length=0===a.length?0:a[a.length-1]):(a=this.B,pb(this),this.B=a);this.b()};function Zb(a,b){K.call(this);this.c(a,b)}r(Zb,K);Zb.prototype.getType=function(){return"MultiPoint"};Zb.prototype.c=function(a,b){a?(qb(this,b,a,1),this.a||(this.a=[]),this.a.length=rb(this.a,0,a,this.f)):pb(this);this.b()};function $b(a,b){K.call(this);this.B=[];this.c(a,b)}r($b,K);$b.prototype.getType=function(){return"MultiPolygon"};$b.prototype.c=function(a,b){if(a){qb(this,b,a,3);this.a||(this.a=[]);b=this.a;var c=this.f,e=this.B,d=0;e=e?e:[];var f=0,g;var h=0;for(g=a.length;h<g;++h)d=sb(b,d,a[h],c,e[f]),e[f++]=d,d=d[d.length-1];e.length=f;0===e.length?this.a.length=0:(a=e[e.length-1],this.a.length=0===a.length?0:a[a.length-1])}else a=this.B,pb(this),this.B=a;this.b()};function ac(a){a=a?a:{};jb.call(this);this.N=H(a.N?a.N:"EPSG:4326");a.I&&(this.a=H(a.I));this.b=a.geometryName}r(ac,Vb);function bc(a,b){var c;if(a){a=(0,cc[a.type])(a);var e=b?H(b.I):null;b=b?H(b.L):null;e&&b&&!ab(e,b)?a instanceof J?c=a.transform(b,e):c=eb(a,b,e):c=a}else c=null;return c}
var cc={Point:function(a){return new Gb(a.coordinates)},LineString:function(a){return new tb(a.coordinates)},Polygon:function(a){return new Hb(a.coordinates)},MultiPoint:function(a){return new Zb(a.coordinates)},MultiLineString:function(a){return new Yb(a.coordinates)},MultiPolygon:function(a){return new $b(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return bc(a,b)});return new Xb(a)}};
function dc(a,b,c){b="Feature"===b.type?b:{type:"Feature",geometry:b};c=bc(b.geometry,c);var e=new ib;if(a.b){a=a.b;var d=za(e.a);(d=ta(e,d))&&(d=sa(d,e.f,e,!0))&&ra(d);e.a=a;x(e,za(e.a),e.f,e);e.f()}e.set(e.a,c);void 0!==b.id&&e.b();b.properties&&xa(e,b.properties);return e};function ec(a,b,c,e,d,f){var g=new ac;a={remote:{url:a,prepare:function(a,b){b.url=b.url.replace("%QUERY",a);return b},transform:function(a){void 0!==b&&(a={type:"FeatureCollection",features:a.features.filter(b)});var d=a,f={I:c,L:e};a=Wb(d);var h;if(f){if(f.L)var n=f.L;else(h=Wb(d).crs)?"name"==h.type?n=H(h.properties.name):u(!1,36):n=g.N;h={L:n,I:f.I}}n=v({L:g.N,I:g.a},h);if("FeatureCollection"===a.type)for(f=[],a=a.features,h=0,d=a.length;h<d;++h)f.push(dc(g,a[h],n));else f=[dc(g,a,n)];return f}},
datumTokenizer:t,queryTokenizer:Bloodhound.tokenizers.whitespace};d=v({},d||{});f=v({},f||{});d.remote&&(v(f,d.remote),delete d.remote);v(a,d);v(a.remote,f);return new Bloodhound(a)}ec.module=angular.module("ngeoSearchCreategeojsonbloodhound",[]);ec.module.value("ngeoSearchCreateGeoJSONBloodhound",ec);"function"!==typeof Ja()&&"function"===typeof proj4&&(Ia=proj4);"function"==typeof Ja()&&(Ja().defs("EPSG:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs"),H("EPSG:21781").f=[42E4,3E4,9E5,35E4]);function fc(a){var b=a||{},c=H("EPSG:21781"),e=b.targetProjection;a={remote:{url:"https://api3.geo.admin.ch/rest/services/api/SearchServer?type=locations&searchText=%QUERY",prepare:function(a,c){c.url=c.url.replace("%QUERY",a);void 0!==b.limit&&(c.url+="&limit="+b.limit);void 0!==b.origins&&(c.url+="&origins="+b.origins);return void 0!==b.prepare?b.prepare(a,c):c},transform:function(a){return a.results.map(function(a){a=a.attrs;var b=new Gb([a.y,a.x]);var d=/BOX\((.*?) (.*?),(.*?) (.*?)\)/g.exec(a.geom_st_box2d);
d=null!==d?[parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]),parseFloat(d[4])]:null;void 0!==e&&(b.transform(c,e),null!==d&&(d=eb(d,c,e)));a.geometry=b;a.bbox=d;b=a.label;a.label_no_html=b.replace(/<\/?[ib]>/g,"");d=/<b>(.*?)<\/b>/g.exec(b);a.label_simple=null!==d?d[1]:b;a=new ib(a);a.b();return a})}},datumTokenizer:t,queryTokenizer:Bloodhound.tokenizers.whitespace};var d=v({},b.options||{}),f=v({},b.remoteOptions||{});d.remote&&(v(f,d.remote),delete d.remote);v(a,d);v(a.remote,f);return new Bloodhound(a)}
fc.module=angular.module("ngeoCreateLocationSearchBloodhound",[]);fc.module.value("ngeoCreateLocationSearchBloodhound",fc);var gc=angular.module("ngeoSearchModule",[Ub.module.name,ec.module.name,fc.module.name]);function hc(a,b,c,e){var d,f;this.b=function(a){return!(2E7<a)};this.a=function(b){var f=a.defer();d&&d.readyState===FileReader.LOADING&&d.abort();d=new FileReader;d.onload=function(a){f.resolve(a.target.result)};d.onerror=function(a){a=a.target.error;c.console.error("Reading file failed: ",a);f.reject({message:20==a.code?e("Operation canceled"):e("Read failed"),reason:a.message})};d.onprogress=function(a){f.notify(a)};d.readAsText(b);return f.promise};this.load=function(d,h){f&&f.resolve();f=h||
a.defer();var g=a.defer();b.get(d,{timeout:f.promise}).then(function(a){g.resolve(a.data)},function(a){c.console.error("Uploading file failed: ",a);g.reject({message:e("Upload failed"),reason:a})});return g.promise}}hc.$inject=["$q","$http","$window","gettext"];var ic=angular.module("ngeo.fileService",[]);ic.service("ngeoFile",hc);function jc(a,b,c,e,d,f){return{restrict:"A",templateUrl:f,scope:{options:"=ngeoImportDndOptions"},link:function(f,h){var g=f.options;if(g&&"function"===typeof g.handleFileContent){f.handleFileContent=g.handleFileContent;h.click(function(){this.style.display="none"}).on("dragleave drop",function(){this.style.display="none"}).on("dragover dragleave drop",function(a){a.stopPropagation();a.preventDefault()}).on("drop",function(b){var h=b.originalEvent.dataTransfer.files;h&&0<h.length?d.a(h[0]).then(function(a){f.handleFileContent(a,
h[0])}):b.originalEvent.dataTransfer.types&&(b=b.originalEvent.dataTransfer.getData("text/plain"),g.isValidUrl(b)?(g.transformUrl||c.when)(b).then(function(b){d.load(b).then(function(a){return f.handleFileContent(a,{url:b})})["catch"](function(b){a.alert(e.getString(b.message))})}):a.alert(e.getString("Invalid URL")+b))});var k=function(a){a.stopPropagation();a.preventDefault();a=a.originalEvent.dataTransfer.types||[];for(var b=0,c=a.length;b<c;++b)if(/(files|text\/plain)/i.test(a[b])){h.css("display",
"table");break}};b.on("dragenter",k);var q=function(){return!1};b.on("dragstart",q);f.$on("$destroy",function(){b.off("dragEnter",k).off("dragstart",q)})}else h.remove()}}}jc.$inject="$window $document $q gettextCatalog ngeoFile ngeoImportDndTemplateUrl".split(" ");var kc=angular.module("ngeo.importDndDirective",["gettext",ic.name]);kc.value("ngeoImportDndTemplateUrl",function(a,b){a=b.ngeoImportDndTemplateUrl;return void 0!==a?a:lc+"/import/partials/import-dnd.html"});
kc.directive("ngeoImportDnd",jc);function mc(a,b,c,e){var d;return{restrict:"A",templateUrl:e,scope:{options:"=ngeoImportLocalOptions"},link:function(f,e){var g=f.options;if(g&&"function"===typeof g.handleFileContent){f.handleFileContent=f.options.handleFileContent;var m=function(){f.userMessage=b("Load local file");f.progress=0;f.fileReader=null};m();g=function(){e.find('input[type="file"]').click()};e.find("button.ngeo-import-browse").click(g);e.find("input.form-control[type=text][readonly]").click(g);e.find("input[type=file]").on("change",
function(a){a.target.files&&0<a.target.files.length&&f.$apply(function(){f.files=a.target.files})});f.$watchCollection("files",function(){if(f.files&&0<f.files.length){var a=f.files[0];f.file=a;f.fileSize=a.size;f.isDropped&&f.handleFile()}});f.isLoading=function(){return 0<f.progress&&100>f.progress};f.isValid=function(a){return!a||c.b(a.size)};f.cancel=function(){f.fileReader&&(f.fileReader.abort(),f.fileReader=null)};f.handleFile=function(){f.file&&(f.loading=!0,f.userMessage=b("Reading file"),
a.cancel(d),c.a(f.file).then(function(a){f.fileReader=null;f.userMessage=b("Parsing file");return f.handleFileContent(a,f.file)}).then(function(a){f.userMessage=a.message},function(a){f.userMessage=a.message},function(a){f.fileReader||(f.fileReader=a.target)}).finally(function(){f.fileReader=null;f.loading=!1;d=a(m,5E3)}))}}else e.remove()}}}mc.$inject=["$timeout","gettext","ngeoFile","ngeoImportLocalTemplateUrl"];var nc=angular.module("ngeo.importLocalDirective",[ic.name]);
nc.value("ngeoImportLocalTemplateUrl",function(a,b){a=b.ngeoImportLocalTemplateUrl;return void 0!==a?a:lc+"/import/partials/import-local.html"});nc.directive("ngeoImportLocal",mc);function oc(a,b,c,e,d){var f;return{restrict:"A",templateUrl:d,scope:{options:"=ngeoImportOnlineOptions"},link:function(d,h){var g=d.options;if(g&&"function"===typeof g.handleFileContent){d.handleFileContent=g.handleFileContent;var k=function(){d.userMessage=e("Connect");d.progress=0;d.loading=!1};k();var q=d.options.urls;q&&0<q.length&&!q[0].name&&(q=q.map(function(a){return{name:a,url:a}}));var n=h.find("input[name=url]").typeahead({hint:!0,highlight:!0,minLength:0},{name:"wms",displayKey:"name",
limit:500,source:function(a){return function(b,c){var d=[];b?a.forEach(function(a){a.name.includes(b)&&d.push(a)}):d=a;c(d)}}(q)}).on("typeahead:selected",function(a,b){n.typeahead("close");d.fileUrl=b.url;d.handleFileUrl();d.$digest()}),y=h.find(".tt-menu");h.find(".ngeo-import-open").on("mousedown",function(a){"none"==y.css("display")?(n.focus(),n.typeahead("val","")):n.blur();a.preventDefault()});d.$on("gettextLanguageChanged",function(){d.fileUrl&&/lang=/.test(d.fileUrl)&&d.handleFileUrl()});
d.cancel=function(){d.progress=0;d.canceler&&(d.canceler.resolve(),d.canceler=null)};d.isValid=function(a){return g.isValidUrl?g.isValidUrl(a):!0};d.handleFileUrl=function(){(g.transformUrl||a.when)(d.fileUrl).then(function(g){d.canceler=a.defer();d.loading=!0;d.userMessage=e("Downloading file");b.cancel(f);c.load(g,d.canceler).then(function(a){d.canceler=null;return d.handleFileContent(a,{url:d.fileUrl})}).then(function(a){d.userMessage=a.message},function(a){d.userMessage=a.message}).finally(function(){d.canceler=
null;d.loading=!1;f=b(k,1E4)})})}}else h.remove()}}}oc.$inject=["$q","$timeout","ngeoFile","gettext","ngeoImportOnlineTemplateUrl"];var pc=angular.module("ngeo.importOnlineDirective",[ic.name,"gettext"]);pc.value("ngeoImportOnlineTemplateUrl",function(a,b){a=b.ngeoImportOnlineTemplateUrl;return void 0!==a?a:lc+"/import/partials/import-online.html"});pc.directive("ngeoImportOnline",oc);function qc(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function rc(){}function sc(a,b){return b instanceof Document?a.b(b):b instanceof Node?a.a(b):"string"===typeof b?(b=(new DOMParser).parseFromString(b,"application/xml"),a.b(b)):null};function tc(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function uc(a){a=Sb(a,!1,[]).join("");return R(a)}function R(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function S(a){a=Sb(a,!1,[]).join("");return vc(a)}function vc(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function T(a){return Sb(a,!1,[]).join("").trim()};function wc(){this.version=void 0}r(wc,rc);wc.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.a(a);return null};wc.prototype.a=function(a){this.version=a.getAttribute("version").trim();return(a=Q({version:this.version},xc,a,[]))?a:null};function U(a,b){return Q({},yc,a,b)}function zc(a,b){return Q({},Ac,a,b)}function Bc(a,b){if(b=U(a,b))return a=[vc(a.getAttribute("width")),vc(a.getAttribute("height"))],b.size=a,b}
function Cc(a,b){return Q([],Dc,a,b)}
var V=[null,"http://www.opengis.net/wms"],xc=P(V,{Service:O(function(a,b){return Q({},Ec,a,b)}),Capability:O(function(a,b){return Q({},Fc,a,b)})}),Fc=P(V,{Request:O(function(a,b){return Q({},Gc,a,b)}),Exception:O(function(a,b){return Q([],Hc,a,b)}),Layer:O(function(a,b){return Q({},Ic,a,b)})}),Ec=P(V,{Name:O(T),Title:O(T),Abstract:O(T),KeywordList:O(Cc),OnlineResource:O(qc),ContactInformation:O(function(a,b){return Q({},Jc,a,b)}),Fees:O(T),AccessConstraints:O(T),LayerLimit:O(S),MaxWidth:O(S),MaxHeight:O(S)}),
Jc=P(V,{ContactPersonPrimary:O(function(a,b){return Q({},Kc,a,b)}),ContactPosition:O(T),ContactAddress:O(function(a,b){return Q({},Lc,a,b)}),ContactVoiceTelephone:O(T),ContactFacsimileTelephone:O(T),ContactElectronicMailAddress:O(T)}),Kc=P(V,{ContactPerson:O(T),ContactOrganization:O(T)}),Lc=P(V,{AddressType:O(T),Address:O(T),City:O(T),StateOrProvince:O(T),PostCode:O(T),Country:O(T)}),Hc=P(V,{Format:Tb(T)}),Ic=P(V,{Name:O(T),Title:O(T),Abstract:O(T),KeywordList:O(Cc),CRS:N(T),EX_GeographicBoundingBox:O(function(a,
b){var c=Q({},Mc,a,b);if(c){a=c.westBoundLongitude;b=c.southBoundLatitude;var e=c.eastBoundLongitude;c=c.northBoundLatitude;if(void 0!==a&&void 0!==b&&void 0!==e&&void 0!==c)return[a,b,e,c]}}),BoundingBox:N(function(a){var b=[R(a.getAttribute("minx")),R(a.getAttribute("miny")),R(a.getAttribute("maxx")),R(a.getAttribute("maxy"))],c=[R(a.getAttribute("resx")),R(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:N(function(a){return{name:a.getAttribute("name"),units:a.getAttribute("units"),
unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:tc(a.getAttribute("multipleValues")),nearestValue:tc(a.getAttribute("nearestValue")),current:tc(a.getAttribute("current")),values:T(a)}}),Attribution:O(function(a,b){return Q({},Nc,a,b)}),AuthorityURL:N(function(a,b){if(b=U(a,b))return b.name=a.getAttribute("name"),b}),Identifier:N(T),MetadataURL:N(function(a,b){if(b=U(a,b))return b.type=a.getAttribute("type"),b}),DataURL:N(U),FeatureListURL:N(U),Style:N(function(a,
b){return Q({},Oc,a,b)}),MinScaleDenominator:O(uc),MaxScaleDenominator:O(uc),Layer:N(function(a,b){var c=b[b.length-1],e=Q({},Ic,a,b);if(e)return b=tc(a.getAttribute("queryable")),void 0===b&&(b=c.queryable),e.queryable=void 0!==b?b:!1,b=vc(a.getAttribute("cascaded")),void 0===b&&(b=c.cascaded),e.cascaded=b,b=tc(a.getAttribute("opaque")),void 0===b&&(b=c.opaque),e.opaque=void 0!==b?b:!1,b=tc(a.getAttribute("noSubsets")),void 0===b&&(b=c.noSubsets),e.noSubsets=void 0!==b?b:!1,(b=R(a.getAttribute("fixedWidth")))||
(b=c.fixedWidth),e.fixedWidth=b,(a=R(a.getAttribute("fixedHeight")))||(a=c.fixedHeight),e.fixedHeight=a,["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(e[a]=(e[a]||[]).concat(c[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in e||(e[a]=c[a])}),e})}),Nc=P(V,{Title:O(T),OnlineResource:O(qc),LogoURL:O(Bc)}),Mc=P(V,{westBoundLongitude:O(uc),eastBoundLongitude:O(uc),southBoundLatitude:O(uc),northBoundLatitude:O(uc)}),
Gc=P(V,{GetCapabilities:O(zc),GetMap:O(zc),GetFeatureInfo:O(zc)}),Ac=P(V,{Format:N(T),DCPType:N(function(a,b){return Q({},Pc,a,b)})}),Pc=P(V,{HTTP:O(function(a,b){return Q({},Qc,a,b)})}),Qc=P(V,{Get:O(U),Post:O(U)}),Oc=P(V,{Name:O(T),Title:O(T),Abstract:O(T),LegendURL:N(Bc),StyleSheetURL:O(U),StyleURL:O(U)}),yc=P(V,{Format:O(T),OnlineResource:O(qc)}),Dc=P(V,{Keyword:Tb(T)});function Rc(a,b,c,e){function d(a,c,e){c.Name||(c.isInvalid=!0,c.Abstract=b("Invalid layer: missing name"));if(!c.isInvalid){c.wmsUrl=a.Capability.Request.GetMap.DCPType[0].HTTP.Get.OnlineResource;c.wmsVersion=a.version;c.id="WMS||"+c.wmsUrl+"||"+c.Name;a:{var f=e.C;if(c.BoundingBox)for(var g=0,h=c.BoundingBox.length;g<h;g++){var n=c.BoundingBox[g],y=n.crs||n.srs;if(y&&y.toUpperCase()==f.toUpperCase()){f=n.extent;break a}}if(g=c.EX_GeographicBoundingBox||c.LatLonBoundingBox)if(h=eb(e.D(),f,"EPSG:4326"),
g=Fa(h,g)){f=eb(g,"EPSG:4326",f);break a}f=void 0}c.extent=f;f=e.C;if(g="1.3.0"==a.version)g=c.CRS||c.SRS||[],g=!(-1!=g.indexOf(f.toUpperCase())||-1!=g.indexOf(f.toLowerCase()));g&&(c.useReprojection=!0,c.extent||(c.isInvalid=!0,c.Abstract=b("Invalid layer: outside the map")))}if(c.Layer){for(f=0;f<c.Layer.length;f++)d(a,c.Layer[f],e)||(c.Layer.splice(f,1),f--);0==c.Layer.length&&(c.Layer=void 0)}if(!c.isInvalid||c.Layer)return c}return{restrict:"A",templateUrl:e,scope:{getCap:"=ngeoWmsGetCap",map:"=ngeoWmsGetCapMap",
options:"=ngeoWmsGetCapOptions"},link:function(f){f.layers=[];f.options=f.options||{};f.$watch("getCap",function(e){try{e=sc(new wc,e)}catch(m){var g=m}g||!e?(a.console.error("WMS GetCap parsing failed: ",g||e),f.userMsg=b("Parsing failed")):(f.limitations="",f.layers=[],f.options.layerSelected=null,f.options.layerHovered=null,e&&e.Service&&e.Capability&&(e.Service.MaxWidth&&(f.limitations=c.getString("Maximum WMS size allowed")+" "+e.Service.MaxWidth+" * "+e.Service.MaxHeight),e.Capability.Layer&&
(e=d(e,e.Capability.Layer,f.map.ja().getProjection()))&&(f.layers=e.Layer||[e])))});f.addLayerSelected=function(){var b=f.options.layerSelected;if(b&&f.options.getOlLayerFromGetCapLayer){var d=c.getString("WMS layer added succesfully");try{var e=f.options.getOlLayerFromGetCapLayer(b);e&&f.map.Pa(e)}catch(k){a.console.error("Add layer failed:"+k),d=c.getString("WMS layer could not be added")+" "+k.message}a.alert(d)}};f.getAbstract=function(){return c.getString((f.options.layerSelected||f.options.layerHovered||
{}).Abstract)||""}}}}Rc.$inject=["$window","gettext","gettextCatalog","ngeoWmsGetCapTemplateUrl"];var Sc=angular.module("ngeo.wmsGetCapDirective",["gettext"]);Sc.value("ngeoWmsGetCapTemplateUrl",function(a,b){a=b.ngeoWmsGetCapTemplateUrl;return void 0!==a?a:lc+"/import/partials/wms-get-cap.html"});Sc.directive("ngeoWmsGetCap",Rc);function Tc(a){var b=a.options;a.addPreviewLayer=function(c,e){c.stopPropagation();b.layerHovered=e;e.isInvalid||b.addPreviewLayer(a.map,e)};a.removePreviewLayer=function(c){c.stopPropagation();b.layerHovered=null;b.removePreviewLayer(a.map)};a.toggleLayerSelected=function(a,e){a.stopPropagation();b.layerSelected=b.layerSelected&&b.layerSelected.Name==e.Name?null:e}}Tc.$inject=["$scope"];
function Uc(a,b){return{restrict:"A",templateUrl:b,controller:"NgeoWmsGetCapItemDirectiveController",compile:function(b){var c=b.contents().remove(),d;return function(b,e){d||(d=a(c));d(b,function(a){e.append(a)});var f=e.find("> .ngeo-header-group"),g=f.find(".fa-plus"),k;f.find(".fa-zoom-in").on("click",function(a){a.stopPropagation();a:{var c=b.layer,d=b.map,e=c.extent;b.options.transformExtent&&(e=b.options.transformExtent(c.extent));a=d.ja();var f=[d.j-d.g+1,d.l-d.i+1];if(c.oa&&e){var g=2834.64*
a.Sa(e,f);if(g>c.oa){d=Ea(e);g/=c.oa;c=(e[2]-e[0])/g;e=(e[3]-e[1])/g;e=[d[0]-c/2,d[1]-e/2,d[0]+c/2,d[1]+e/2];if(e=b.options.transformExtent(e))e=a.nb(a.Sa(e,f),0,-1),a.setCenter(d),a.rb(e);break a}}e&&a.Qa(e,f)}});g.on("click",function(a){a.stopPropagation();g.toggleClass("fa-minus");k||(k=e.find("> .ngeo-child-group"));k.slideToggle()})}}}}Uc.$inject=["$compile","ngeoWmsGetCapItemTemplateUrl"];var Vc=angular.module("ngeo.wmsGetCapItemDirective",[]);
Vc.value("ngeoWmsGetCapItemTemplateUrl",function(a,b){a=b.ngeoWmsGetCapItemTemplateUrl;return void 0!==a?a:lc+"/import/partials/wms-get-cap-item.html"});Vc.controller("NgeoWmsGetCapItemDirectiveController",Tc);Vc.directive("ngeoWmsGetCapItem",Uc);function Wc(){}r(Wc,rc);Wc.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.a(a);return null};Wc.prototype.a=function(a){return(a=Q({},Xc,a,[]))?a:null};
var W=[null,"http://www.opengis.net/ows/1.1"],Xc=P(W,{ServiceIdentification:O(function(a,b){return Q({},Yc,a,b)}),ServiceProvider:O(function(a,b){return Q({},Zc,a,b)}),OperationsMetadata:O(function(a,b){return Q({},$c,a,b)})}),ad=P(W,{DeliveryPoint:O(T),City:O(T),AdministrativeArea:O(T),PostalCode:O(T),Country:O(T),ElectronicMailAddress:O(T)}),bd=P(W,{Value:N(function(a){return T(a)})}),cd=P(W,{AllowedValues:O(function(a,b){return Q({},bd,a,b)})}),ed=P(W,{Phone:O(function(a,b){return Q({},dd,a,b)}),
Address:O(function(a,b){return Q({},ad,a,b)})}),gd=P(W,{HTTP:O(function(a,b){return Q({},fd,a,b)})}),fd=P(W,{Get:N(function(a,b){var c=qc(a);if(c)return Q({href:c},hd,a,b)}),Post:void 0}),id=P(W,{DCP:O(function(a,b){return Q({},gd,a,b)})}),$c=P(W,{Operation:function(a,b){var c=a.getAttribute("name");(a=Q({},id,a,b))&&(b[b.length-1][c]=a)}}),dd=P(W,{Voice:O(T),Facsimile:O(T)}),hd=P(W,{Constraint:N(function(a,b){var c=a.getAttribute("name");if(c)return Q({name:c},cd,a,b)})}),jd=P(W,{IndividualName:O(T),
PositionName:O(T),ContactInfo:O(function(a,b){return Q({},ed,a,b)})}),Yc=P(W,{Abstract:O(T),AccessConstraints:O(T),Fees:O(T),Title:O(T),ServiceTypeVersion:O(T),ServiceType:O(T)}),Zc=P(W,{ProviderName:O(T),ProviderSite:O(qc),ServiceContact:O(function(a,b){return Q({},jd,a,b)})});function kd(){this.c=new Wc}r(kd,rc);kd.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.a(a);return null};kd.prototype.a=function(a){var b=a.getAttribute("version").trim(),c=this.c.a(a);if(!c)return null;c.version=b;return(c=Q(c,ld,a,[]))?c:null};function md(a){var b=T(a).split(" ");if(b&&2==b.length&&(a=+b[0],b=+b[1],!isNaN(a)&&!isNaN(b)))return[a,b]}
var X=[null,"http://www.opengis.net/wmts/1.0"],nd=[null,"http://www.opengis.net/ows/1.1"],ld=P(X,{Contents:O(function(a,b){return Q({},od,a,b)})}),od=P(X,{Layer:N(function(a,b){return Q({},pd,a,b)}),TileMatrixSet:N(function(a,b){return Q({},qd,a,b)})}),pd=P(X,{Style:N(function(a,b){if(b=Q({},rd,a,b))return a="true"===a.getAttribute("isDefault"),b.isDefault=a,b}),Format:N(T),TileMatrixSetLink:N(function(a,b){return Q({},sd,a,b)}),Dimension:N(function(a,b){return Q({},td,a,b)}),ResourceURL:N(function(a){var b=
a.getAttribute("format"),c=a.getAttribute("template");a=a.getAttribute("resourceType");var e={};b&&(e.format=b);c&&(e.template=c);a&&(e.resourceType=a);return e})},P(nd,{Title:O(T),Abstract:O(T),WGS84BoundingBox:O(function(a,b){a=Q([],ud,a,b);if(2==a.length){b=[Infinity,Infinity,-Infinity,-Infinity];for(var c=0,e=a.length;c<e;++c){var d=b,f=a[c];f[0]<d[0]&&(d[0]=f[0]);f[0]>d[2]&&(d[2]=f[0]);f[1]<d[1]&&(d[1]=f[1]);f[1]>d[3]&&(d[3]=f[1])}return b}}),Identifier:O(T)})),rd=P(X,{LegendURL:N(function(a){var b=
{};b.format=a.getAttribute("format");b.href=qc(a);return b})},P(nd,{Title:O(T),Identifier:O(T)})),sd=P(X,{TileMatrixSet:O(T),TileMatrixSetLimits:O(function(a,b){return Q([],vd,a,b)})}),vd=P(X,{TileMatrixLimits:Tb(function(a,b){return Q({},wd,a,b)})}),wd=P(X,{TileMatrix:O(T),MinTileRow:O(S),MaxTileRow:O(S),MinTileCol:O(S),MaxTileCol:O(S)}),td=P(X,{Default:O(T),Value:N(T)},P(nd,{Identifier:O(T)})),ud=P(nd,{LowerCorner:Tb(md),UpperCorner:Tb(md)}),qd=P(X,{WellKnownScaleSet:O(T),TileMatrix:N(function(a,
b){return Q({},xd,a,b)})},P(nd,{SupportedCRS:O(T),Identifier:O(T)})),xd=P(X,{TopLeftCorner:O(md),ScaleDenominator:O(uc),TileWidth:O(S),TileHeight:O(S),MatrixWidth:O(S),MatrixHeight:O(S)},P(nd,{Identifier:O(T)}));function yd(a,b,c){return{restrict:"A",templateUrl:c,scope:{getCap:"=ngeoWmtsGetCap",map:"=ngeoWmtsGetCapMap",url:"=ngeoWmtsGetCapUrl",options:"=ngeoWmtsGetCapOptions"},link:function(c){c.layers=[];c.options=c.options||{};c.$watch("getCap",function(b){try{b=sc(new kd,b)}catch(F){var d=F}if(d||!b)console.error("WMTS GetCap parsing failed: ",d||b),c.userMsg=a("Parsing failed");else if(c.layers=[],c.options.layerSelected=null,c.options.layerHovered=null,b&&b.Contents&&b.Contents.Layer){d=c.url;for(var e=
c.map.ja().getProjection(),h=[],m=ha(b.Contents.Layer),k=m.next();!k.done;k=m.next()){k=k.value;k.Title||(k.isInvalid=!0,k.Abstract=a("Invalid layer: missing name"));if(!k.isInvalid){k.sourceConfig=Fb(b,{layer:k.Identifier});"ServiceProvider"in b&&(k.attribution=b.ServiceProvider.ProviderName,k.attributionUrl=b.ServiceProvider.ProviderSite);k.capabilitiesUrl=d;a:{var q=e.C;var n=k.WGS84BoundingBox;if(n){var y=eb(e.D(),q,"EPSG:4326");if(n=Fa(y,n)){q=eb(n,"EPSG:4326",q);break a}}q=void 0}k.extent=q}h.push(k)}c.layers=
h}});c.addLayerSelected=function(){var a=c.options.layerSelected;if(a&&c.options.getOlLayerFromGetCapLayer){var e=b.getString("WMTS layer added succesfully");try{var g=c.options.getOlLayerFromGetCapLayer(a);g&&c.map.Pa(g)}catch(h){console.error("Add layer failed:"+h),e=b.getString("WMTS layer could not be added")+" "+h.message}alert(e)}};c.getAbstract=function(){return b.getString((c.options.layerSelected||c.options.layerHovered||{}).Abstract)||""}}}}yd.$inject=["gettext","gettextCatalog","ngeoWmtsGetCapTemplateUrl"];
var zd=angular.module("ngeo.wmtsGetCapDirective",["gettext"]);zd.value("ngeoWmtsGetCapTemplateUrl",function(a,b){a=b.ngeoWmtsGetCapTemplateUrl;return void 0!==a?a:lc+"/import/partials/wmts-get-cap.html"});zd.directive("ngeoWmtsGetCap",yd);function Ad(a){var b=a.options;a.addPreviewLayer=function(c,e){c.stopPropagation();b.layerHovered=e;e.isInvalid||b.addPreviewLayer(a.map,e)};a.removePreviewLayer=function(c){c.stopPropagation();b.layerHovered=null;b.removePreviewLayer(a.map)};a.toggleLayerSelected=function(a,e){a.stopPropagation();b.layerSelected=b.layerSelected&&b.layerSelected.Title==e.Title?null:e}}Ad.$inject=["$scope"];
function Bd(a,b){return{restrict:"A",templateUrl:b,controller:"NgeoWmtsGetCapItemDirectiveController",compile:function(b){var c=b.contents().remove(),d;return function(b,e){d||(d=a(c));d(b,function(a){e.append(a)});e.find("> .ngeo-header-group").find(".fa-zoom-in").on("click",function(a){a.stopPropagation();var c=b.layer,d=b.map;a=c.extent;b.options.transformExtent&&(a=b.options.transformExtent(c.extent));c=d.ja();d=[d.j-d.g+1,d.l-d.i+1];a&&c.Qa(a,d)})}}}}Bd.$inject=["$compile","ngeoWmtsGetCapItemTemplateUrl"];
var Cd=angular.module("ngeo.wmtsGetCapItemDirective",[]);Cd.value("ngeoWmtsGetCapItemTemplateUrl",function(a,b){a=b.ngeoWmsGetCapItemTemplateUrl;return void 0!==a?a:lc+"/import/partials/wmts-get-cap-item.html"});Cd.controller("NgeoWmtsGetCapItemDirectiveController",Ad);Cd.directive("ngeoWmtsGetCapItem",Bd);var Dd=angular.module("ngeo.import",[ic.name,kc.name,nc.name,pc.name,Sc.name,Vc.name,zd.name,Cd.name]);var Ed=angular.module("ngeo",[gc.name,Dd.name,"gettext","ui.date","floatThead"]),lc="ngeomodule";la("ngeo.AttributeType",{fb:"boolean",gb:"date",hb:"datetime",ib:"geometry",jb:"number",kb:"select",TEXT:"text"});la("ngeo.FeatureProperties",{ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"});la("ngeo.FilterCondition",{AND:"&&",NOT:"!",OR:"||"});
la("ngeo.GeometryType",{CIRCLE:"Circle",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",MULTI_POINT:"MultiPoint",MULTI_POLYGON:"MultiPolygon",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"});la("ngeo.NumberType",{FLOAT:"float",INTEGER:"integer"});(function(){function a(a){a.put("ngeomodule/import/partials/wmts-get-cap-item.html",'<div class=ngeo-header-group ng-class="{\'ngeo-odd\': $odd, \'ngeo-invalid\': layer.isInvalid, \'ngeo-selected\': (options.layerSelected === layer)}" ng-mouseenter="addPreviewLayer($event, layer)" ng-mouseleave=removePreviewLayer($event) ng-click="toggleLayerSelected($event, layer)"> <button class="fa fa-zoom-in ngeo-btn" ng-disabled=!(layer.extent)></button> {{layer.Title}} </div> ');a.put("ngeo/scaleselector.html",
'<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span ng-bind-html="scaleselectorCtrl.currentScale | ngeoScalify | ngeoTrustHtml"></span>&nbsp;<i class=caret></i> </button> <ul class="dropdown-menu btn-block" role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html="scaleselectorCtrl.getScale(zoomLevel) | ngeoScalify | ngeoTrustHtml"> </a> </li> </ul> </div> ');
a.put("ngeo/attributes.html",'<fieldset ng-disabled=attrCtrl.disabled> <div class=form-group ng-repeat="attribute in ::attrCtrl.attributes"> <div ng-if="attribute.type !== \'geometry\'"> <label ng-if="::attribute.type !== \'boolean\'" class=control-label>{{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span> </label> <div ng-switch=::attribute.type> <div ng-switch-when=boolean class=checkbox> <label> <input name={{::attribute.name}} ng-required=attribute.required ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); type=checkbox> <span> {{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span></span> </label> </div> <select name={{::attribute.name}} ng-required=attribute.required ng-switch-when=select ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <option ng-repeat="attribute in ::attribute.choices" value="{{ ::attribute }}"> {{ ::attribute }} </option> </select> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=date ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=datetime ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <div ng-switch-when=number ng-switch=::attribute.numType> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=integer ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control step=1 type=number> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=number> </div> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); ng-maxlength=attribute.maxLength class=form-control type=text> <div ng-show="attrCtrl.form.$submitted || attrCtrl.form[attribute.name].$touched"> <p class=text-danger ng-show=attrCtrl.form[attribute.name].$error.required> {{\'This field is required\' | translate}} </p> </div> </div> </div> </div> </fieldset> ');
a.put("ngeo/datepicker.html","<div class=ngeo-datepicker> <form name=dateForm class=ngeo-datepicker-form novalidate> <div ng-if=\"::datepickerCtrl.time.widget === 'datepicker'\"> <div class=ngeo-datepicker-start-date> <span ng-if=\"::datepickerCtrl.time.mode === 'range'\" translate>From:</span> <span ng-if=\"::datepickerCtrl.time.mode !== 'range'\" translate>Date:</span> <input name=sdate ui-date=datepickerCtrl.sdateOptions ng-model=datepickerCtrl.sdate required> </div> <div class=ngeo-datepicker-end-date ng-if=\"::datepickerCtrl.time.mode === 'range'\"> <span translate>To:</span> <input name=edate ui-date=datepickerCtrl.edateOptions ng-model=datepickerCtrl.edate required> </div> </div> </form> </div> ");
a.put("ngeomodule/import/partials/wms-get-cap.html",'<div class=ngeo-message>{{limitations}}</div> <div class=ngeo-container> <div class=ngeo-header ng-click="reverse = !reverse"> <label translate>Layer</label> <button class="pull-right fa" ng-class="{\'fa-sort-by-alphabet\': !reverse, \'fa-sort-by-alphabet-alt\': reverse}"></button> </div> <div class=ngeo-content> <ul> <li ng-repeat="layer in layers | orderBy:\'Title\':reverse"> <div ngeo-wms-get-cap-item></div> </li> </ul> </div> <div class="modal-backdrop fade in" ng-show="progress > 0 && progress < 100"> <div class="progress progress-striped active"> <div class=progress-bar style="width: 100%;"></div> </div> </div> </div> <div class=ngeo-descr> <label translate>Description</label> <textarea placeholder="{{\'description instructions\' | translate}}" class=form-control readonly>{{getAbstract()}}</textarea> <button type=button class="btn btn-default btn-sm ngeo-add" ng-disabled="(!options.layerSelected || options.layerSelected.isInvalid)" ng-click=addLayerSelected() translate>Add layer</button> </div> ');
a.put("ngeo/googlestreetview.html",'<div class=ngeo-googlestreetview-instructions ng-if="gsvCtrl.location === null" translate> Click on a road on the map to start StreetView. </div> <div class=ngeo-googlestreetview-nodata ng-if=gsvCtrl.noDataAtLocation translate> Street View data not found for this location. </div> ');a.put("ngeo/popup.html",'<h4 class="popover-title ngeo-popup-title"> <span ng-bind-html=title></span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> ');
a.put("ngeomodule/import/partials/import-online.html",'<form class="form-group form-group-sm"> <input type=url name=url autocomplete=off placeholder="{{\'Choose or enter online resource URL\' | translate}}" ng-model=fileUrl required class=form-control> <div class="ngeo-import-open fa fa-collapse"></div> </form> <div class=tabbable-footer> <button type=button class="btn btn-default btn-sm" ng-class="{\'btn-danger\': canceler}" ng-disabled="!fileUrl || !isValid(fileUrl) || (loading && !canceler)" ng-click="loading ? cancel() : handleFileUrl()"> <span>{{userMessage | translate}}</span> </button> </div> ');
a.put("ngeomodule/import/partials/import-local.html",'<div class="input-group input-group-sm"> <input type=file name=file> <input class=form-control type=text readonly value="{{(file.name) ? file.name + \', \' + file.size/1000 + \' ko\' : \'\'}}" placeholder="{{\'No file\' | translate}}"> <span class=input-group-btn> <button type=button class="btn btn-default ngeo-import-browse" translate>Browse</button> </span> </div> <div ng-hide=isValid(file) class=ngeo-error translate>File too large</div> <div class=tabbable-footer> <button type=button class="btn btn-default btn-sm ngeo-load" ng-class="{\'btn-danger\': loading}" ng-disabled="!isValid(file) || (loading && !fileReader)" ng-click="loading ? cancel() : handleFile()"> <span>{{userMessage | translate}}</span> </button> </div> ');
a.put("ngeomodule/import/partials/import-dnd.html","<div translate>Drop file here</div> ");a.put("ngeomodule/import/partials/wms-get-cap-item.html",'<div class=ngeo-header-group ng-class="{\'ngeo-odd\': $odd, \'ngeo-invalid\': layer.isInvalid, \'ngeo-selected\': (options.layerSelected === layer)}" ng-mouseenter="addPreviewLayer($event, layer)" ng-mouseleave=removePreviewLayer($event) ng-click="toggleLayerSelected($event, layer)"> <button class="fa fa-zoom-in ngeo-btn" ng-disabled=!(layer.extent)></button> <button class="fa fa-plus" ng-hide=!(layer.Layer)></button> {{layer.Title}} </div> <ul class=ngeo-child-group ng-if=!!(layer.Layer)> <li ng-repeat="layer in layer.Layer | orderBy:\'Title\'"> <div ngeo-wms-get-cap-item></div> </li> </ul> ');
a.put("ngeo/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
a.put("ngeo/grid.html",'<div class=ngeo-grid-table-container> <table float-thead=ctrl.floatTheadConfig ng-model=ctrl.configuration.data class="table table-bordered table-striped table-hover"> <thead class=table-header> <tr> <th ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-click=ctrl.sort(columnDefs.name) ng-bind-html="columnDefs.name | ngeoTrustHtml | translate"> <i ng-show="ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === true" class="fa fa-caret-up"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === false" class="fa fa-caret-down"></i> </th> </tr> </thead> <tbody> <tr ng-repeat="attributes in ctrl.configuration.data" ng-class="[\'row-\' + ctrl.configuration.getRowUid(attributes), ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']" ng-click="ctrl.clickRow(attributes, $event)" ng-mousedown=ctrl.preventTextSelection($event)> <td ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | ngeoTrustHtml"></td> </tr> </tbody> </table> </div> ');
a.put("ngeomodule/import/partials/wmts-get-cap.html",'<div class=ngeo-container> <div class=ngeo-header ng-click="reverse = !reverse"> <label translate>Layer</label> <button class="pull-right fa" ng-class="{\'fa-sort-by-alphabet\': !reverse, \'fa-sort-by-alphabet-alt\': reverse}"></button> </div> <div class=ngeo-content> <ul> <li ng-repeat="layer in layers | orderBy:\'Title\':reverse"> <div ngeo-wmts-get-cap-item></div> </li> </ul> </div> <div class="modal-backdrop fade in" ng-show="progress > 0 && progress < 100"> <div class="progress progress-striped active"> <div class=progress-bar style="width: 100%;"></div> </div> </div> </div> <div class=ngeo-descr> <label translate>Description</label> <textarea placeholder="{{\'description instructions\' | translate}}" class=form-control readonly>{{getAbstract()}}</textarea> <button type=button class="btn btn-default btn-sm ngeo-add" ng-disabled="(!options.layerSelected || options.layerSelected.isInvalid)" ng-click=addLayerSelected() translate>Add layer</button> </div> ');
a.put("ngeo/filter.html",'<div class=dropdown> <a class="btn btn-link dropdown-toggle ngeo-filter-condition-button" ng-class="{disabled: filterCtrl.aRuleIsActive}" type=button data-toggle=dropdown ng-disabled=filterCtrl.aRuleIsActive> <span class="fa fa-cog"></span> <span class=caret></span> </a> <ul class=dropdown-menu> <li class=ngeo-filter-condition-criteria-header translate>Criteria taken into account</li> <li ng-repeat="condition in ::filterCtrl.conditions"> <a href ng-click=filterCtrl.setCondition(condition)> <span ng-class="{\'ngeo-filter-condition-criteria-active\': condition.value == filterCtrl.datasource.filterCondition}" class="fa fa-check ngeo-filter-condition-criteria"> </span> <span>{{::condition.text | translate}}</span> </a> </li> </ul> </div> <ngeo-rule ng-repeat="rule in filterCtrl.directedRules" feature-overlay=::filterCtrl.featureOverlay class=ngeo-filter-rule-directed map=filterCtrl.map rule=rule tool-group=filterCtrl.toolGroup> </ngeo-rule> <hr class=ngeo-filter-separator-rules> <div ng-repeat="rule in filterCtrl.customRules"> <a class="btn btn-xs btn-link ngeo-filter-rule-custom-rm-btn" ng-click="!filterCtrl.aRuleIsActive && filterCtrl.removeCustomRule(rule)" ng-disabled=filterCtrl.aRuleIsActive href> <span class="fa fa-remove"></span> </a> <ngeo-rule feature-overlay=::filterCtrl.featureOverlay class=ngeo-filter-rule-custom map=filterCtrl.map rule=rule tool-group=filterCtrl.toolGroup> </ngeo-rule> </div> <div class=dropdown> <a class="btn btn-link dropdown-toggle" ng-class="{disabled: filterCtrl.aRuleIsActive}" type=button data-toggle=dropdown ng-disabled=filterCtrl.aRuleIsActive> <span translate>+ Add a new criteria</span> <span class=caret></span> </a> <ul class=dropdown-menu> <li ng-repeat="attribute in ::filterCtrl.geometryAttributes"> <a href ng-click=filterCtrl.createAndAddCustomRule(attribute)> <span translate>Spatial filter</span> </a> </li> <li role=presentation class=divider></li> <li ng-repeat="attribute in ::filterCtrl.otherAttributes"> <a href ng-click=filterCtrl.createAndAddCustomRule(attribute)> <span>{{::attribute.name | translate}}</span> </a> </li> </ul> </div> <hr class=ngeo-filter-separator-criteria> <a class="btn btn-link" type=button ng-click="!filterCtrl.aRuleIsActive && filterCtrl.apply()" ng-disabled=filterCtrl.aRuleIsActive> <span class="fa fa-check"></span> <span translate>Apply filter</span> </a> <a class="btn btn-link" type=button ng-click="!filterCtrl.aRuleIsActive && filterCtrl.getData()" ng-disabled=filterCtrl.aRuleIsActive> <span class="fa fa-chevron-right"></span> <span translate>Get data</span> </a> ');
a.put("ngeo/colorpicker.html",'<table class=ngeo-colorpicker-palette> <tr ng-repeat="colors in ::ctrl.colors"> <td ng-repeat="color in ::colors" ng-click=ctrl.setColor(color) ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}"> <div ng-style="::{\'background-color\': color}"></div> </td> </tr> </table> ');a.put("ngeo/rule.html",'<div class=dropdown ng-class="{open: ruleCtrl.rule.active}"> <a class="btn btn-default btn-sm dropdown-toggle" type=button ng-click=ruleCtrl.toggle()> <span>{{ ::ruleCtrl.clone.name | translate }}</span> <span class=caret></span> </a> <div class="dropdown-menu form-group"> <select class="form-control input-sm ngeo-rule-operators-list" ng-disabled=ruleCtrl.drawActive ng-if=::ruleCtrl.clone.operators ng-model=ruleCtrl.clone.operator ng-options="ruleCtrl.operators[operator] | translate for operator in ::ruleCtrl.clone.operators track by operator"> </select> <div ng-switch=::ruleCtrl.clone.type> <div class="ngeo-rule-type-date form-group" ng-if=ruleCtrl.rule.active ng-switch-when=date|datetime ng-switch-when-separator=|> <div ng-switch=ruleCtrl.clone.operator> <div ng-switch-when=..> <ngeo-date-picker time=ruleCtrl.timeRangeMode on-date-selected=ruleCtrl.onDateRangeSelected(time)> </ngeo-date-picker> </div> <div ng-switch-default> <ngeo-date-picker time=ruleCtrl.timeValueMode on-date-selected=ruleCtrl.onDateSelected(time)> </ngeo-date-picker> </div> </div> </div> <div class="ngeo-rule-type-geometry form-group" ng-switch-when=geometry> <div ng-switch=ruleCtrl.geomType> <span class="gmf-icon gmf-icon-point" ng-switch-when=Point> </span> <span class="gmf-icon gmf-icon-line" ng-switch-when=LineString> </span> <span class="gmf-icon gmf-icon-polygon" ng-switch-when=Polygon> </span> <span class="gmf-icon gmf-icon-circle" ng-switch-when=Circle> </span> <span class="gmf-icon gmf-icon-rectangle" ng-switch-when=Rectangle> </span> </div> <ngeo-drawfeature ngeo-drawfeature-active=ruleCtrl.drawActive ngeo-drawfeature-features=ruleCtrl.drawnFeatures ngeo-drawfeature-map=ruleCtrl.map> <div ngeo-btn-group class=btn-group> <a data-toggle=tooltip title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-sm btn-default ngeo-drawfeature-point" ng-show="[\'intersects\', \'within\'].indexOf(ruleCtrl.clone.operator) !== -1" ng-class="{active: dfCtrl.drawPoint.active}" ng-model=dfCtrl.drawPoint.active> <span class="gmf-icon gmf-icon-point"></span> </a> <a data-toggle=tooltip title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-sm btn-default ngeo-drawfeature-linestring" ng-show="[\'intersects\', \'within\'].indexOf(ruleCtrl.clone.operator) !== -1" ng-class="{active: dfCtrl.measureLength.active}" ng-model=dfCtrl.measureLength.active> <span class="gmf-icon gmf-icon-line"></span> </a> <a data-toggle=tooltip title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-sm btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model=dfCtrl.measureArea.active> <span class="gmf-icon gmf-icon-polygon"></span> </a> <a data-toggle=tooltip title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-sm btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model=dfCtrl.measureAzimut.active> <span class="gmf-icon gmf-icon-circle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-sm btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model=dfCtrl.drawRectangle.active> <span class="gmf-icon gmf-icon-rectangle"></span> </a> </div> <div class=ngeo-rule-type-geometry-instructions ng-if=ruleCtrl.drawActive> <span ng-if=dfCtrl.drawPoint.active> {{ \'Draw a point on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureLength.active> {{ \'Draw a line string on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureArea.active> {{ \'Draw a polygon on the map.\' | translate }} </span> <span ng-if=dfCtrl.measureAzimut.active> {{ \'Draw a circle on the map.\' | translate }} </span> <span ng-if=dfCtrl.drawRectangle.active> {{ \'Draw a rectangle on the map.\' | translate }} </span> </div> </ngeo-drawfeature> </div> <div class="checkbox ngeo-rule-type-select" ng-switch-when=select> <a ng-click=ruleCtrl.selectAllChoices() href>{{ All | translate}} </a> <label class="form-group ol-unselectable" ng-repeat="choice in ::ruleCtrl.clone.choices"> <input ng-checked="ruleCtrl.clone.getExpression() && ruleCtrl.clone.getExpression().split(\',\').indexOf(choice) > -1" ng-click=ruleCtrl.toggleChoiceSelection(choice) type=checkbox value=choice> <span>{{ choice | translate }}</span> </label> </div> <div class="form-group ngeo-rule-type-text" ng-switch-default> <div ng-switch=ruleCtrl.clone.operator> <div ng-switch-when=..> <input type=number class="form-control input-sm" ng-model=ruleCtrl.clone.lowerBoundary> <input type=number class="form-control input-sm" ng-model=ruleCtrl.clone.upperBoundary> </div> <div ng-switch-default> <input type=number class="form-control input-sm" ng-if="ruleCtrl.clone.type === \'number\'" ng-model=ruleCtrl.clone.expression> <input type=text class="form-control input-sm" ng-if="ruleCtrl.clone.type !== \'number\'" ng-model=ruleCtrl.clone.expression> </div> </div> </div> <div class=ngeo-rule-btns> <button class="btn btn-xs btn-default" ng-click=ruleCtrl.apply() type=button>{{\'Apply\' | translate}}</button> <button class="btn btn-xs btn-default" ng-click=ruleCtrl.cancel() type=button>{{\'Cancel\' | translate}}</button> </div> </div> </div> </div> <div class=ngeo-rule-value ng-if="ruleCtrl.rule.value !== null"> <a class="btn btn-xs btn-link" ng-click="!ruleCtrl.rule.active && ruleCtrl.reset()" ng-disabled=ruleCtrl.rule.active href> <span class="fa fa-remove"></span> </a> <div ng-switch=::ruleCtrl.rule.type> <div ng-switch-when=date|datetime ng-switch-when-separator=|> <div ng-switch=ruleCtrl.rule.operator> <div ng-switch-when=..> <span translate>From </span> <span>{{ ruleCtrl.timeToDate(ruleCtrl.rule.lowerBoundary) }}</span> <span translate> to </span> <span>{{ ruleCtrl.timeToDate(ruleCtrl.rule.upperBoundary) }}</span> </div> <div ng-switch-default> <span>{{ ruleCtrl.rule.operator }}</span> <span>{{ ruleCtrl.timeToDate(ruleCtrl.rule.getExpression()) }}</span> </div> </div> </div> <div ng-switch-when=geometry> <span>{{ ruleCtrl.operators[ruleCtrl.rule.operator] }}</span> <span ng-switch=ruleCtrl.getRuleGeometryType()> <span class="gmf-icon gmf-icon-point" ng-switch-when=Point> </span> <span class="gmf-icon gmf-icon-line" ng-switch-when=LineString> </span> <span class="gmf-icon gmf-icon-polygon" ng-switch-when=Polygon> </span> <span class="gmf-icon gmf-icon-circle" ng-switch-when=Circle> </span> <span class="gmf-icon gmf-icon-rectangle" ng-switch-when=Rectangle> </span> </span> </div> <div ng-switch-when=select> <span ng-repeat="choice in ruleCtrl.rule.getExpression().split(\',\')"> {{ choice | translate }}{{ $last ? \'\' : \', \' }} </span> </div> <div ng-switch-default> <div ng-switch=ruleCtrl.rule.operator> <div ng-switch-when=..> <span translate>Between </span> <span>{{ ruleCtrl.rule.lowerBoundary }}</span> <span translate> and </span> <span>{{ ruleCtrl.rule.upperBoundary }}</span> </div> <div ng-switch-default> <span>{{ ruleCtrl.rule.operator }}</span> <span>{{ ruleCtrl.rule.getExpression() }}</span> </div> </div> </div> </div> </div> ')}
a.$inject=["$templateCache"];Ed.run(a)})();function Fd(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Fd);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}ma(Fd,Error);Fd.prototype.name="CustomError";function Gd(a,b){for(var c=a.split("%s"),e="",d=Array.prototype.slice.call(arguments,1);d.length&&1<c.length;)e+=c.shift()+d.shift();return e+c.join("%s")};function Hd(a,b){b.unshift(a);Fd.call(this,Gd.apply(null,b));b.shift()}ma(Hd,Fd);Hd.prototype.name="AssertionError";function Id(a,b){throw new Hd("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};Ed.value("ngeoPopupTemplateUrl",function(a,b){a=b.ngeoPopupTemplateurl;return void 0!==a?a:"ngeo/popup.html"});function Jd(a){return{restrict:"A",templateUrl:a,link:function(a,c){c.addClass("popover");a.close=function(a){a&&(a.stopPropagation(),a.preventDefault());c.addClass("hidden")};a.$watch("open",function(a){c.css("display",a?"block":"none")})}}}Jd.$inject=["ngeoPopupTemplateUrl"];Ed.directive("ngeoPopup",Jd);function Y(a,b,c,e){var d=this;this.scope=b.$new(!0);this.scope.$watch(function(){return d.scope.open},function(a){!a&&d.c&&d.f(function(){d.destroy()})});this.b=c;this.f=e;this.a=angular.element("<div ngeo-popup></div>");this.c=!1;a(this.a)(this.scope);angular.element(document.body).append(this.a)}Y.prototype.Ra=function(){return this.scope.open};Y.prototype.getOpen=Y.prototype.Ra;Y.prototype.R=function(a){this.scope.open=a};Y.prototype.setOpen=Y.prototype.R;
Y.prototype.destroy=function(){this.scope.$destroy();this.a.remove()};Y.prototype.destroy=Y.prototype.destroy;Y.prototype.setTitle=function(a){a=this.b.trustAsHtml(a);this.scope.title=a};Y.prototype.setTitle=Y.prototype.setTitle;Y.prototype.setContent=function(a,b){this.scope.content=b?this.b.trustAsHtml(a):a};Y.prototype.setContent=Y.prototype.setContent;Y.prototype.setUrl=function(a){a=this.b.trustAsHtml('<iframe src="'+a+'" width="100%" height="100%"></iframe>');this.setContent(a)};
Y.prototype.setUrl=Y.prototype.setUrl;Y.prototype.Y=function(a){this.a.width(a)};Y.prototype.setWidth=Y.prototype.Y;Y.prototype.X=function(a){this.a.height(a)};Y.prototype.setHeight=Y.prototype.X;Y.prototype.Ba=function(a,b){this.Y(a);this.X(b)};Y.prototype.setSize=Y.prototype.Ba;Y.prototype.P=function(a){this.c=a};Y.prototype.setAutoDestroy=Y.prototype.P;Y.prototype.addClass=function(a){this.a.addClass(a)};Y.prototype.addClass=Y.prototype.addClass;
Y.prototype.open=function(a){a.url?this.setUrl(a.url):a.content?this.setContent(a.content):Id('ngeo.Popup options requirest "url" or "content".');void 0!==a.autoDestroy&&this.P(a.autoDestroy);void 0!==a.cls&&this.addClass(a.cls);void 0!==a.height&&this.X(a.height);void 0!==a.title&&this.setTitle(a.title);void 0!==a.width&&this.Y(a.width);this.R(!0)};Y.prototype.open=Y.prototype.open;function Kd(a,b,c,e){return function(){return new Y(a,b,c,e)}}Kd.$inject=["$compile","$rootScope","$sce","$timeout"];
Ed.factory("ngeoCreatePopup",Kd);var Ld=angular.module("app",["ngeo"]);function Z(a,b){this.b=a;this.a=b;$('[data-toggle="tooltip"]').tooltip({container:"body",trigger:"hover"})}Z.$inject=["$sce","ngeoCreatePopup"];Z.prototype.bb=function(){var a=this.a();a.P(!0);a.setTitle("Simple popup");var b=this.b.trustAsHtml("This is a simple 400x300 px popup.");a.setContent(b);a.Y("400px");a.X("300px");a.R(!0)};Z.prototype.simplePopup=Z.prototype.bb;
Z.prototype.Ua=function(){var a=this.a();a.P(!0);a.addClass("popup-with-iframe");a.setTitle("Iframe popup");a.setUrl("http://geomapfish.org/");a.Ba("400px","300px");a.R(!0)};Z.prototype.iframePopup=Z.prototype.Ua;
Z.prototype.Ta=function(){var a=this.a();a.P(!0);a.setTitle("This is a popup with lots and lots of content and a very long title");var b=this.b.trustAsHtml("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla egetquam at ex euismod bibendum et eget enim. Nulla sodales tortor acsagittis aliquet. Ut malesuada quam vitae pulvinar porta. Nunc idmagna id risus malesuada elementum eget id purus. Curabitur vel augueblandit, faucibus nulla quis, consequat tellus. Phasellus commodo,tellus et vulputate ultricies, nulla libero ornare arcu, quisfermentum sem diam quis tellus. Aliquam ut sapien tristique, laciniaante et, lacinia arcu. Quisque sagittis eros at quam blanditgravida. Nulla sit amet enim semper, efficitur eros sit amet,porttitor libero. Fusce quis tellus est. Quisque ornare, ex egetluctus pharetra, nisl leo lobortis purus, sed tristique neque leo egetodio. Maecenas lobortis nisl ac magna mollis, ac pulvinar risusconvallis. Donec ullamcorper sollicitudin maximus. Quisque bibendumelit sit amet ultrices ornare. Donec aliquam felis id urna ultricesscelerisque.");a.setContent(b);
a.R(!0)};Z.prototype.heavyPopup=Z.prototype.Ta;Z.prototype.Xa=function(){var a=this.a(),b=this.b.trustAsHtml("This popup was opened using the <code>open</code> method.");a.open({autoDestroy:!0,content:b,height:"200px",title:'Opened with "open"',width:"300px"})};Z.prototype.openPopupWithContent=Z.prototype.Xa;Z.prototype.Ya=function(){this.a().open({autoDestroy:!0,cls:"popup-with-iframe",height:"300px",title:'Opened with "open" and "iframe"',url:"http://geomapfish.org/",width:"400px"})};
Z.prototype.openPopupWithUrl=Z.prototype.Ya;Ld.controller("MainController",Z);}).call(window);
//# sourceMappingURL=popupservice.js.map
